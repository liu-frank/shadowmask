{"version":3,"sources":["sensitive/login.js"],"names":["$","isPlaceholer","input","document","createElement","placeholderfriend","focus","s","hide","prev","show","idValue","attr","replace","clsValue","form","this","elements","find","each","pValue","sValue","val","blur","elementsPass","i","html","outerHTML","after","next","window","placeholderfriendfocus","click","event","preventDefault","id","password","ajax","type","url","data","username","dataType","success","res","console","log","code","userName","localStorage","setItem","token","source","authToken","done","resp","linkUrl","schemas","name","tables","location","href","info","jQuery"],"mappings":"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","file":"sensitive/login.js","sourcesContent":["/**\n * Created by liukai on 16/10/13.\n */\n(function($) {\n  var placeholderfriend = {\n    focus: function(s) {\n      s = $(s).hide().prev().show().focus();\n      var idValue = s.attr(\"id\");\n      if (idValue) {\n        s.attr(\"id\", idValue.replace(\"placeholderfriend\", \"\"));\n      }\n      var clsValue = s.attr(\"class\");\n      if (clsValue) {\n        s.attr(\"class\", clsValue.replace(\"placeholderfriend\", \"\"));\n      }\n    }\n  }\n  //判断是否支持placeholder\n  function isPlaceholer() {\n    var input = document.createElement('input');\n    return \"placeholder\" in input;\n  }\n  //不支持的代码\n  if (!isPlaceholer()) {\n    $(function() {\n      var form = $(this);\n      //遍历所有文本框，添加placeholder模拟事件\n      var elements = form.find(\"input[type='text'][placeholder]\");\n      elements.each(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            s.val(pValue);\n          }\n        }\n      });\n      elements.focus(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (sValue && pValue) {\n          if (sValue == pValue) {\n            s.val('');\n          }\n        }\n      });\n      elements.blur(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (!sValue) {\n          s.val(pValue);\n        }\n      });\n      //遍历所有密码框，添加placeholder模拟事件\n      var elementsPass = form.find(\"input[type='password'][placeholder]\");\n      elementsPass.each(function(i) {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            //DOM不支持type的修改，需要复制密码框属性，生成新的DOM\n            var html = this.outerHTML || \"\";\n            html = html.replace(/\\s*type=(['\"])?password\\1/gi, \" type=text placeholderfriend\")\n              .replace(/\\s*(?:value|on[a-z]+|name)(=(['\"])?\\S*\\1)?/gi, \" \")\n              .replace(/\\s*placeholderfriend/, \" placeholderfriend value='\" + pValue\n                + \"' \" + \"onfocus='placeholderfriendfocus(this);' \");\n            var idValue = s.attr(\"id\");\n            if (idValue) {\n              s.attr(\"id\", idValue + \"placeholderfriend\");\n            }\n            var clsValue = s.attr(\"class\");\n            if (clsValue) {\n              s.attr(\"class\", clsValue + \"placeholderfriend\");\n            }\n            s.hide();\n            s.after(html);\n          }\n        }\n      });\n      elementsPass.blur(function() {\n        var s = $(this);\n        var sValue = s.val();\n        if (sValue == '') {\n          var idValue = s.attr(\"id\");\n          if (idValue) {\n            s.attr(\"id\", idValue + \"placeholderfriend\");\n          }\n          var clsValue = s.attr(\"class\");\n          if (clsValue) {\n            s.attr(\"class\", clsValue + \"placeholderfriend\");\n          }\n          s.hide().next().show();\n        }\n      });\n    });\n  }\n  window.placeholderfriendfocus = placeholderfriend.focus;\n\n  $('.submit-button').click(function() {\n    event.preventDefault();\n    var id = $('#id-input').val(),\n        password = $('#password-input').val();\n    $.ajax({\n      type: \"POST\",\n      url: \"/admin/login\",\n      data: {username:id, password:password},\n      dataType: \"json\",\n      success: function(res){\n        console.log(res.code)\n        var code = res.code;\n        if(code == 0){\n          res.data.userName = 'test';\n          localStorage.setItem(\"token\",res.data.token);\n          localStorage.setItem(\"name\",res.data.userName);\n          var url = '/data/schema'\n          var data = {\n            source:'HIVE@SPARK',\n            authToken:res.data.token\n          };\n          $.ajax({\n            url: url,\n            type: 'GET',\n            data: data\n          }).done(function (resp) {\n            var linkUrl = '/sensitive/sensitive-detail.html?source='+resp.data[0].source +\n              '&setMenu2=' + resp.data[0].schemas[0].name +\n              '&setMenu3=' + resp.data[0].schemas[0].tables[0].name;\n            window.location.href = linkUrl;\n          })\n        }else{\n          $('.error-message').html(res.info);\n        }\n      }\n    });\n  })\n\n})(jQuery);\n\n\n\n\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJzZW5zaXRpdmUvbG9naW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGxpdWthaSBvbiAxNi8xMC8xMy5cbiAqL1xuKGZ1bmN0aW9uKCQpIHtcbiAgdmFyIHBsYWNlaG9sZGVyZnJpZW5kID0ge1xuICAgIGZvY3VzOiBmdW5jdGlvbihzKSB7XG4gICAgICBzID0gJChzKS5oaWRlKCkucHJldigpLnNob3coKS5mb2N1cygpO1xuICAgICAgdmFyIGlkVmFsdWUgPSBzLmF0dHIoXCJpZFwiKTtcbiAgICAgIGlmIChpZFZhbHVlKSB7XG4gICAgICAgIHMuYXR0cihcImlkXCIsIGlkVmFsdWUucmVwbGFjZShcInBsYWNlaG9sZGVyZnJpZW5kXCIsIFwiXCIpKTtcbiAgICAgIH1cbiAgICAgIHZhciBjbHNWYWx1ZSA9IHMuYXR0cihcImNsYXNzXCIpO1xuICAgICAgaWYgKGNsc1ZhbHVlKSB7XG4gICAgICAgIHMuYXR0cihcImNsYXNzXCIsIGNsc1ZhbHVlLnJlcGxhY2UoXCJwbGFjZWhvbGRlcmZyaWVuZFwiLCBcIlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8v5Yik5pat5piv5ZCm5pSv5oyBcGxhY2Vob2xkZXJcbiAgZnVuY3Rpb24gaXNQbGFjZWhvbGVyKCkge1xuICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgcmV0dXJuIFwicGxhY2Vob2xkZXJcIiBpbiBpbnB1dDtcbiAgfVxuICAvL+S4jeaUr+aMgeeahOS7o+eggVxuICBpZiAoIWlzUGxhY2Vob2xlcigpKSB7XG4gICAgJChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmb3JtID0gJCh0aGlzKTtcbiAgICAgIC8v6YGN5Y6G5omA5pyJ5paH5pys5qGG77yM5re75YqgcGxhY2Vob2xkZXLmqKHmi5/kuovku7ZcbiAgICAgIHZhciBlbGVtZW50cyA9IGZvcm0uZmluZChcImlucHV0W3R5cGU9J3RleHQnXVtwbGFjZWhvbGRlcl1cIik7XG4gICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciBwVmFsdWUgPSBzLmF0dHIoXCJwbGFjZWhvbGRlclwiKTtcbiAgICAgICAgdmFyIHNWYWx1ZSA9IHMudmFsKCk7XG4gICAgICAgIGlmIChwVmFsdWUpIHtcbiAgICAgICAgICBpZiAoc1ZhbHVlID09ICcnKSB7XG4gICAgICAgICAgICBzLnZhbChwVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbGVtZW50cy5mb2N1cyhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgcFZhbHVlID0gcy5hdHRyKFwicGxhY2Vob2xkZXJcIik7XG4gICAgICAgIHZhciBzVmFsdWUgPSBzLnZhbCgpO1xuICAgICAgICBpZiAoc1ZhbHVlICYmIHBWYWx1ZSkge1xuICAgICAgICAgIGlmIChzVmFsdWUgPT0gcFZhbHVlKSB7XG4gICAgICAgICAgICBzLnZhbCgnJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsZW1lbnRzLmJsdXIoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHBWYWx1ZSA9IHMuYXR0cihcInBsYWNlaG9sZGVyXCIpO1xuICAgICAgICB2YXIgc1ZhbHVlID0gcy52YWwoKTtcbiAgICAgICAgaWYgKCFzVmFsdWUpIHtcbiAgICAgICAgICBzLnZhbChwVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8v6YGN5Y6G5omA5pyJ5a+G56CB5qGG77yM5re75YqgcGxhY2Vob2xkZXLmqKHmi5/kuovku7ZcbiAgICAgIHZhciBlbGVtZW50c1Bhc3MgPSBmb3JtLmZpbmQoXCJpbnB1dFt0eXBlPSdwYXNzd29yZCddW3BsYWNlaG9sZGVyXVwiKTtcbiAgICAgIGVsZW1lbnRzUGFzcy5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyIHMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgcFZhbHVlID0gcy5hdHRyKFwicGxhY2Vob2xkZXJcIik7XG4gICAgICAgIHZhciBzVmFsdWUgPSBzLnZhbCgpO1xuICAgICAgICBpZiAocFZhbHVlKSB7XG4gICAgICAgICAgaWYgKHNWYWx1ZSA9PSAnJykge1xuICAgICAgICAgICAgLy9ET03kuI3mlK/mjIF0eXBl55qE5L+u5pS577yM6ZyA6KaB5aSN5Yi25a+G56CB5qGG5bGe5oCn77yM55Sf5oiQ5paw55qERE9NXG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRoaXMub3V0ZXJIVE1MIHx8IFwiXCI7XG4gICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9cXHMqdHlwZT0oWydcIl0pP3Bhc3N3b3JkXFwxL2dpLCBcIiB0eXBlPXRleHQgcGxhY2Vob2xkZXJmcmllbmRcIilcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccyooPzp2YWx1ZXxvblthLXpdK3xuYW1lKSg9KFsnXCJdKT9cXFMqXFwxKT8vZ2ksIFwiIFwiKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvXFxzKnBsYWNlaG9sZGVyZnJpZW5kLywgXCIgcGxhY2Vob2xkZXJmcmllbmQgdmFsdWU9J1wiICsgcFZhbHVlXG4gICAgICAgICAgICAgICAgKyBcIicgXCIgKyBcIm9uZm9jdXM9J3BsYWNlaG9sZGVyZnJpZW5kZm9jdXModGhpcyk7JyBcIik7XG4gICAgICAgICAgICB2YXIgaWRWYWx1ZSA9IHMuYXR0cihcImlkXCIpO1xuICAgICAgICAgICAgaWYgKGlkVmFsdWUpIHtcbiAgICAgICAgICAgICAgcy5hdHRyKFwiaWRcIiwgaWRWYWx1ZSArIFwicGxhY2Vob2xkZXJmcmllbmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xzVmFsdWUgPSBzLmF0dHIoXCJjbGFzc1wiKTtcbiAgICAgICAgICAgIGlmIChjbHNWYWx1ZSkge1xuICAgICAgICAgICAgICBzLmF0dHIoXCJjbGFzc1wiLCBjbHNWYWx1ZSArIFwicGxhY2Vob2xkZXJmcmllbmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLmhpZGUoKTtcbiAgICAgICAgICAgIHMuYWZ0ZXIoaHRtbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsZW1lbnRzUGFzcy5ibHVyKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciBzVmFsdWUgPSBzLnZhbCgpO1xuICAgICAgICBpZiAoc1ZhbHVlID09ICcnKSB7XG4gICAgICAgICAgdmFyIGlkVmFsdWUgPSBzLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgICBpZiAoaWRWYWx1ZSkge1xuICAgICAgICAgICAgcy5hdHRyKFwiaWRcIiwgaWRWYWx1ZSArIFwicGxhY2Vob2xkZXJmcmllbmRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjbHNWYWx1ZSA9IHMuYXR0cihcImNsYXNzXCIpO1xuICAgICAgICAgIGlmIChjbHNWYWx1ZSkge1xuICAgICAgICAgICAgcy5hdHRyKFwiY2xhc3NcIiwgY2xzVmFsdWUgKyBcInBsYWNlaG9sZGVyZnJpZW5kXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzLmhpZGUoKS5uZXh0KCkuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICB3aW5kb3cucGxhY2Vob2xkZXJmcmllbmRmb2N1cyA9IHBsYWNlaG9sZGVyZnJpZW5kLmZvY3VzO1xuXG4gICQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaWQgPSAkKCcjaWQtaW5wdXQnKS52YWwoKSxcbiAgICAgICAgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQtaW5wdXQnKS52YWwoKTtcbiAgICAkLmFqYXgoe1xuICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICB1cmw6IFwiL2FkbWluL2xvZ2luXCIsXG4gICAgICBkYXRhOiB7dXNlcm5hbWU6aWQsIHBhc3N3b3JkOnBhc3N3b3JkfSxcbiAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5jb2RlKVxuICAgICAgICB2YXIgY29kZSA9IHJlcy5jb2RlO1xuICAgICAgICBpZihjb2RlID09IDApe1xuICAgICAgICAgIHJlcy5kYXRhLnVzZXJOYW1lID0gJ3Rlc3QnO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9rZW5cIixyZXMuZGF0YS50b2tlbik7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJuYW1lXCIscmVzLmRhdGEudXNlck5hbWUpO1xuICAgICAgICAgIHZhciB1cmwgPSAnL2RhdGEvc2NoZW1hJ1xuICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgc291cmNlOidISVZFQFNQQVJLJyxcbiAgICAgICAgICAgIGF1dGhUb2tlbjpyZXMuZGF0YS50b2tlblxuICAgICAgICAgIH07XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgdmFyIGxpbmtVcmwgPSAnL3NlbnNpdGl2ZS9zZW5zaXRpdmUtZGV0YWlsLmh0bWw/c291cmNlPScrcmVzcC5kYXRhWzBdLnNvdXJjZSArXG4gICAgICAgICAgICAgICcmc2V0TWVudTI9JyArIHJlc3AuZGF0YVswXS5zY2hlbWFzWzBdLm5hbWUgK1xuICAgICAgICAgICAgICAnJnNldE1lbnUzPScgKyByZXNwLmRhdGFbMF0uc2NoZW1hc1swXS50YWJsZXNbMF0ubmFtZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbGlua1VybDtcbiAgICAgICAgICB9KVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAkKCcuZXJyb3ItbWVzc2FnZScpLmh0bWwocmVzLmluZm8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pXG5cbn0pKGpRdWVyeSk7XG5cblxuXG5cbiJdLCJmaWxlIjoic2Vuc2l0aXZlL2xvZ2luLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n"],"sourceRoot":"/source/"}